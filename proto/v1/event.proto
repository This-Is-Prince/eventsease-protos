syntax = "proto3";

package eventsease.v1;

import "google/protobuf/timestamp.proto";
import "proto/v1/user.proto";

option go_package = "github.com/This-Is-Prince/eventsease-protos/gen/go/proto/v1;eventsease_v1";
option java_multiple_files = true;
option java_package = "com.eventsease.v1";
option java_outer_classname = "EventProto";

service EventService {
  rpc GetEvents (GetEventsRequest) returns (GetEventsResponse);
  rpc GetEvent (GetEventRequest) returns (GetEventResponse);
  rpc GetEventStats (GetEventStatsRequest) returns (GetEventStatsResponse);

  rpc CreateEvent (CreateEventRequest) returns (CreateEventResponse);
  rpc GetUserEvents (GetUserEventsRequest) returns (GetEventsResponse);
  rpc GetSavedEvents (GetUserEventsRequest) returns (GetEventsResponse);
  rpc ToggleSavedEvent (ToggleSavedEventRequest) returns (ToggleSavedEventResponse);
}

enum SortBy {
  SORT_BY_UNSPECIFIED = 0;
  SORT_BY_START_DATE = 1;
  SORT_BY_CREATED_DATE = 2;
  SORT_BY_HEART_COUNT = 3;
  SORT_BY_SAVED_COUNT = 4;
}

enum SortDirection {
  SORT_DIRECTION_UNSPECIFIED = 0;
  SORT_DIRECTION_ASC = 1;
  SORT_DIRECTION_DESC = 2;
}

enum SocialType {
  SOCIAL_TYPE_UNSPECIFIED = 0;
  SOCIAL_TYPE_PHONE = 1;
  SOCIAL_TYPE_INSTAGRAM = 2;
  SOCIAL_TYPE_FACEBOOK = 3;
  SOCIAL_TYPE_WHATSAPP = 4;
  SOCIAL_TYPE_WEBSITE = 5;
  SOCIAL_TYPE_EMAIL = 6;
  SOCIAL_TYPE_TWITTER = 7;
  SOCIAL_TYPE_LINKEDIN = 8;
  SOCIAL_TYPE_YOUTUBE = 9;
  SOCIAL_TYPE_OTHER = 10;
}

message Event {
  string id = 1;
  string name = 2;
  string description = 3;
  string slug = 4;
  google.protobuf.Timestamp start_date = 5;
  google.protobuf.Timestamp end_date = 6;
  Location location = 7;
  repeated string event_photos = 8;
  string user_id = 9;
  string organizer = 10;
  string category = 11;
  TicketInfo ticket_info = 12;
  repeated SocialLink social = 13;
  bool is_paid = 14;
  bool is_approved = 15;
  bool is_regular = 16;
  int32 heart_count = 17;
  int32 saved_count = 18;
  google.protobuf.Timestamp created_at = 19;
  google.protobuf.Timestamp updated_at = 20;
  string is_pinned = 21; 
  UserProfile organizer_detail = 22;
}

message Location {
  string address = 1;
  double lat = 2;
  double lng = 3;
}

message TicketInfo {
  bool is_free = 1;
  double entry_fee = 2;
  double early_bird_fee = 3;
  bool is_appointment_based = 4;
}

message SocialLink {
  SocialType type = 1; 
  string value = 2;
}

message GetEventsRequest {
  Region region = 1;
  repeated string categories = 2;
  string date = 3; 
  SortBy sort_by = 4;
  SortDirection sort_direction = 5;
  string search_query = 6;
  bool is_regular = 7;
  int32 page = 8;
  int32 limit = 9;
}

message Region {
  double latitude = 1;
  double longitude = 2;
  double latitude_delta = 3;
  double longitude_delta = 4;
}

message GetEventsResponse {
  bool success = 1;
  repeated Event data = 2;
  MetaData meta = 3;
}

message MetaData {
  int64 total_count = 1;
  int64 total_pages = 2;
  int32 current_page = 3;
  int32 limit = 4;
  bool has_next_page = 5;
  bool has_previous_page = 6;
}

message GetEventRequest {
  string id_or_slug = 1;
}

message GetEventResponse {
  bool success = 1;
  Event data = 2;
}

message CreateEventRequest {
  Event event = 1;
}

message CreateEventResponse {
  bool success = 1;
  string message = 2;
  Event data = 3;
}

message GetEventStatsRequest {
  string id = 1;
}

message GetEventStatsResponse {
  bool success = 1;
  EventStats data = 2;
}

message EventStats {
  int32 heart_count = 1;
  int32 saved_count = 2;
}

message GetUserEventsRequest {
  int32 page = 1;
  int32 limit = 2;
  string search_query = 3;
  SortBy sort_by = 4;
  SortDirection sort_direction = 5;
}

message ToggleSavedEventRequest {
  string event_id = 1;
}

message ToggleSavedEventResponse {
  bool success = 1;
  bool is_saved = 2;
}